<!-- index.html 13.12.2025 -->

<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tafel App</title>

    <link rel="stylesheet" href="css/Global.css">
    <link rel="stylesheet" href="css/Login.css">
    <link rel="stylesheet" href="css/Form.css">
    <link rel="stylesheet" href="css/Popup.css">
    <link rel="stylesheet" href="css/Rapporte.css">
 
 
  <script>
//    const loggedInUsernameForTesting = "ab"; // Testmodus
  </script>

  </head>
  <body>
  
<!-- Laden Anmeldung-->
  <div id="loading-initial" style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
    <p>Anmeldung wird geladen...</p>
  <div class="spinner"></div> </div>

<!-- App-Container mit Header-->
  <div id="app-container">
    <div id="tafelHeader">
      <div class="titleArea">
        <h1 id="header-title">Tafel Sterkrade</h1>
        <div class="version" id="version-login">Version 5.12.13-1</div>
                  <img src="TafelLogo.png" alt="Logo">
      </div>
    </div>

<!-- login-section-->
    <section id="login-section" class="app-section">

      <input type="text" id="Anmelde" placeholder="Anmeldenamen eingeben">
      <button id="login-button">Anmelden</button>
      <p id="status">Bitte Anmeldenamen eingeben</p>
      <p id="message"></p>
    </section>

  
<!-- formular-section-->
    <section id="formular-section" class="app-section hidden">

      <p id="greeting" style="text-align:left; font-weight:bold;"></p>
      <div id="hinweis-label">
        Bitte w√§hle einen Termin und passe deine Funktion an.<br>
        √Ñnderungen werden nur gespeichert, wenn du auf <strong>"Senden"</strong> klickst.
      </div>

      <div id="loading-overlay" class="loading-state hidden">
        <p id="loading-text">Daten werden geladen...</p>
        <div class="loading-step">
          <span>Formulardaten werden geladen ‚Ä¶</span>
          <span id="spinner-formdata" class="spinner small"></span>
        </div>
        <div class="loading-step">
          <span>Anmeldungen werden geladen ‚Ä¶</span>
          <span id="spinner-anmeldungen" class="spinner small"></span>
        </div>
        <div class="loading-step">
          <span>Anmeldeinfos werden geladen ‚Ä¶</span>
          <span id="spinner-infos" class="spinner small"></span>
        </div>
      </div>


      <div id="termin-options"></div>

      <div class="funktionInfoBereich">
        <div id="funktion-label"></div>
        <div id="fmc-options"></div>
      </div>

      <button id="submit-button" onclick="submitForm()" disabled>Senden</button>
      <p id="waiting-status"></p>
      <p id="status"></p>
      <div id="details"></div>

      <!--<div class="AnmeldeInfoBereich">-->

      <div id="anmeldeInfo" class="AnmeldeInfoBereich">
        <div id="anmeldeInfoTermin">AnmeldeInfo</div>
        <div id="anmeldeInfoFunc">0 Fahrer, 0 Ausgabe, 0 Registratur</div>
        <div class="button-group-rapport ">
          <button class="rapportbuttons" id="rapport-button" onclick="tagesRapportOeffnen()">TagesRapport</button>
        </div>
      </div>

      <div class="button-group">
        <button class="groupbuttons" id="helferliste-button" onclick="helferlisteOeffnen()">Helferliste</button>
        <button class="groupbuttons" id="geburtstage-button" onclick="geburtstageOeffnen()">Geburtstage</button>
        <button class="groupbuttons hidden" id="overlayNews-button" onclick="showOverlayNews()" >Info</button>
      </div>
    </section>
  </div>

<!-- overlay Submit-->
    <div id="overlaySubmit" class="hidden">
        <div id="overlaySubmitContent">
          <div id="overlaySubmitText">üïì Eingaben werden gespeichert‚Ä¶</div>
          <button id="closeOverlaySubmit" onclick="closeOverlaySubmit()">OK</button>
        </div>
    </div>

<!-- overlay Helferliste-->
    <div id="overlayHelferliste" style="display: none;">
      <div id="overlayHelferliste-content">
        <div id="overlayHelferliste-title" class="overlay-title"></div>

        <h3 id="scrollboxHelferliste-title">Helfer: 0</h3>

        <div class="scrollbox scrollbox-helferliste">
          <table>
            <thead>
              <tr>
                <th id="header-name" onclick="sortHelferListe('Name')">Name</th>
                <th id="header-vorname" onclick="sortHelferListe('Vorname')">Vorname</th>
                <th id="header-status" onclick="sortHelferListe('Status')">Status</th>
                <th id="header-mobil" onclick="sortHelferListe('Mobil')">Mobil</th>
              </tr>
            </thead>
            <tbody id="scrollboxHelferliste-table">
              </tbody>
          </table>
        </div>
        
        <div id="downloadLink_Helferliste"></div>
  
        <div id="sendMailXLS_Helferliste"></div>

        <div class="overlayHelferliste-buttons">
            <button onclick="closeOverlay('overlayHelferliste')">Schlie√üen</button>
            <button onclick="downloadLinkHelferliste()">PDF-Datei</button>
            <button onclick="sendmailXLSHelferliste()">XLS-Datei</button>
        </div>

      </div>
    </div>      

<!-- overlay Geburtstage-->
    <div id="overlayGeburtstage">
      <div id="overlayGeburtstage-content">
        <div id="overlayGeburtstage-title" class="overlay-title">Geburtstage der Tafel-Helfer</div>

        <h4 id="scrollboxGeburtstage-title">bevorstehende Geburtstage:</h4>
        <div class="scrollbox scrollbox-geburtstage">
          <table id="scrollboxGeburtstage-table"></table>
        </div>

        <button class="close-button" onclick="closeOverlay('overlayGeburtstage')">Schlie√üen</button>
        
      </div>
    </div>

<!-- overlay Rapport -->
    <div id="overlayRapport">
        <div id="overlayRapport-content">
          <h2 id="overlayRapport-title" class="overlay-title">Tagesrapport</h2>

          <div class="view-toggle-area">
            <label class="checkbox-container">
              <input type="checkbox" id="preview-toggle" onchange="toggleRapportView(event)">
                <span class="checkmark"></span>
                Vorschau-Ansicht
            </label>
          </div>

          <div id="scrollbox-view" class="rapport-view">
            <h4 id="scrollboxAnmeldungen-title">Anmeldungen:</h4>
            <p id="scrollboxAnmeldungenInfoFunc" class="scrollboxZusatzInfo" >0 Fahrer, 0 Ausgabe, 0 Registratur</p>
            <div class="scrollbox scrollbox-anmeldungen">
              <table id="scrollboxAnmeldungen-table"></table>
            </div>

            <h4 id="scrollboxAbmeldungen-title">ohne Anmeldung:</h4>
            <p id="scrollboxAbmeldungenInfoFunc" class="scrollboxZusatzInfo" >0 Abmeldungen, 0 ohne Meldung</p>
            <div class="scrollbox scrollbox-abmeldungen">
              <table id="scrollboxAbmeldungen-table"></table>
            </div>
          </div>

          <div id="preview-view" class="rapport-view hidden">
            <div id="previewContainer" class="preview-area">
            </div>
            <img src="TafelLogo.png" alt="Logo">
          </div>

          <div id="export_meldung"></div>

          <div class="overlayRapport-buttons">
            <button onclick="closeOverlay('overlayRapport')">Schlie√üen</button>
            <button onclick="downloadLinkRapport()">PDF-Datei</button>
            <button onclick="sendmailXLSRapport()">XLSX-Datei</button>
          </div>
        </div>
    </div>

<!-- overlay News -->
<div id="overlayNews">
    <div id="overlayNews-content">
        <h2 id="overlayNews-title" class="overlay-title">Wichtige Information</h2>

        <div id="overlayNewstext-area">
            <p id="overlayNews-text"></p> 
        </div>

        <div id="decision-options" class="decision-group">
            <label class="radio-label">
                <input type="radio" name="newsDecision" value="dabei">Ich bin dabei
            </label>
            <label class="radio-label">
                <input type="radio" name="newsDecision" value="nicht_dabei" >Ich bin nicht dabei
            </label>
            <label class="radio-label">
                <input type="radio" name="newsDecision" value="weiss_nicht" >Ich wei√ü noch nicht
            </label>
        </div>

        <button id="close-overlayNews" class="close-button" onclick="closeOverlayNews()" >Schlie√üen</button> 
        
    </div>
</div>    

<!-- popup -->
    <div id="popup" style="display: none;">
        <div id="popup-content">
          <p>  </p>
        <button onclick="closePopup()">Schlie√üen</button>
        </div>
    </div>


    

    <script src="APPS_SCRIPT_URL.js"></script>
    <script src="js/Start.js"></script>
    <script src="js/Global.js"></script>
    <script src="js/Login.js"></script>
    <script src="js/Form.js"></script>
    <script src="js/Rapport.js"></script>
    <script src="js/Helferliste.js"></script>
    <script src="js/Geburtstage.js"></script>
    <script src="js/News.js"></script>


  </body>
</html>
